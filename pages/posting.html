<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Posting</title>
    </head>

    <body>
        <label for="posts">Posts:</label><br>
        <textarea id="answer" cols="50" rows="10"></textarea><br>
        <div id="container"></div><br><br>

        <form action="/postmessage" method="post">
            <label for="topic">Topic:</label>
            <input type="text" name="topic" id="topic"><br><br>
            <label for="data">Data:</label><br>
            <textarea name="data" cols="50" rows="5" id="data">Add Text</textarea><br>
            <input type="submit" value="Submit">
            <button onclick="writeData()">Submit</button>
        </form>

        <script type="text/javascript">
            function displayPosts() {
                var http = new XMLHttpRequest();
                var url = '/postmessage';
                http.open('GET', url, true);

                
            }

            function writeData() {
                var topic = document.getElementById('topic');
                var data = document.getElementById('data');
                var http = new XMLHttpRequest();
                var url = '/postmessage';

                http.open('POST', url, true);
                http.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');

                http.onreadystatechange = function() { 
                    if(http.readyState == 4 && http.status == 200) {
                        alert("Data was written");
                    } else {
                        alert("Data failed to be written");
                    }
                }
                http.send(JASON.stringify({ topic, data }));
            }
        </script>
    </body>
</html>